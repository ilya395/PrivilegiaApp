(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{136:function(e,n,o){"use strict";o.r(n),function(e,t){o.d(n,"tpl",(function(){return l}));var a=o(132),l={content:function(){return'\n    <div class="modal ipoteka-modal">\n        <div class="close"><img src="temps/img/catalog/close.png"></div>\n        <div class="main-form">\n            <h1>Консультация по ипотеке</h1>\n            <p>Оставьте свой номер, мы перезвоним</p>\n            <form action="">\n                <input type="hidden" name="title">\n                <div class="form-el-wr">\n                    <input type="text" name="phone" placeholder="+7(___)___-__-__" class="phonemask">\n                    <button><img src="temps/img/catalog/btn-ar.png"></button>\n                </div>\n                <div class="toCenter">\n                    <input type="checkbox" id="agree" name="agree" checked>\n                    <label for="agree">согласен на <a href="#">обработку персональных данных</a></label>\n                </div>\n            </form>\n        </div>\n        <div class="thnk-block transparent">\n            <h1>Спасибо!</h1>\n            <p>Мы свяжемся с Вами в ближайшее время</p>\n        </div>\n    </div>\n    '},func:function(){function n(){t(".overlay .ipoteka-modal").css("display","block"),t(".overlay").fadeIn();var e=t(".phonemask");Inputmask.extendDefinitions({f:{validator:"[9().+/ ]"}}),e.length&&e.inputmask({mask:"+7(f99)999-99-99"}),t(".overlay .close").click((function(){t(".overlay").fadeOut(),t(".overlay .modal").fadeOut()}))}function o(e){var n=!1;return['Вызвана форма со старницы "«Привилегия» для семьи"','Вызвана форма со старницы "Гибкая система рассрочки и отсрочка от застройщика',"Оплата материнским капиталом",'Вызвана форма со старницы "Ипотека от 8,7%"'].forEach((function(o){n=o===e})),n}console.log("контент модуля активирован!"),document.querySelector(".modal.ipoteka-modal").classList.add("visible"),document.querySelector(".modal.ipoteka-modal form button").addEventListener("click",(function(){event.preventDefault(),console.log("start send");var n=document.querySelector('.modal.ipoteka-modal form input[name="title"]'),t=document.querySelector('.modal.ipoteka-modal form input[name="phone"]'),l=function(e){if(console.log(e),""!=e&&null!=e&&"undefibed"!=e){for(var n=[0,1,2,3,4,5,6,7,8,9],o=e.split(""),t=0,a=0;a<o.length;a++)for(var l=0;l<n.length;l++)o[a]==n[l]&&t++;var i=!1,c=["+7(911)111-11-11","+7(922)222-22-22","+7(933)333-33-33","+7(944)444-44-44","+7(955)555-55-55","+7(966)666-66-66","+7(977)777-77-77","+7(988)888-88-88","+7(999)999-99-99"];for(a=0;a<c.length;a++)e==c[a]&&(i=!0);return 11==t&&0==i}}(t.value);console.log(t.value,n.value);var i,c,r="action=action_fetch&phone=".concat(t.value,"&title=").concat(n.value);null!=t.value&&null!=t.value&&""!=t.value&&1==l&&1==o(n.value)&&(console.log(t.value,l,o(n.value)),i=r,c=a.resolve(e,"./listener.php"),console.log(c),fetch(c,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:i}).then((function(e){console.log("Сообщение отправлено методом fetch"),console.log(e),function(){console.log("start");var e,n=document.querySelector(".modal.ipoteka-modal .thnk-block");n.classList.add("vkl"),e=function(){n.classList.remove("transparent"),n.classList.add("movie")},window.requestAnimationFrame((function(){window.requestAnimationFrame((function(){e()}))})),setTimeout((function(){n.addEventListener("transitionend",(function e(){n.classList.remove("vkl"),n.removeEventListener("transitionend",e)})),n.classList.remove("movie"),n.classList.add("transparent")}),3e3)}()})).then((function(){t.value=""})).catch((function(e){console.error(e)})))})),t(".ipoteka-open").click(n),n()}}}.call(this,"/",o(23))}}]);