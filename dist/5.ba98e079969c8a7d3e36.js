(window.webpackJsonp=window.webpackJsonp||[]).push([[5,7,9],{133:function(e,t,n){"use strict";n.r(t),function(e,a){n.d(t,"formFromAkcii",(function(){return c}));var i=n(132),c=function(t){console.log("form is activated");var n=t.querySelector('input[name="title"]')||"Форма обратной связи",c=t.querySelector('input[name="name"]'),o=t.querySelector('input[name="phone"]'),l=t.querySelector("button"),d=e(".phonemask");function s(){event.preventDefault();var e,l,d="action=action_fetch&phone=".concat(o.value,"&title=").concat(n.value);null!=o.value&&null!=o.value&&""!=o.value&&1==function(e){if(console.log(e),""!=e&&null!=e&&"undefibed"!=e){for(var t=[0,1,2,3,4,5,6,7,8,9],n=e.split(""),a=0,i=0;i<n.length;i++)for(var c=0;c<t.length;c++)n[i]==t[c]&&a++;var o=!1,l=["+7(911)111-11-11","+7(922)222-22-22","+7(933)333-33-33","+7(944)444-44-44","+7(955)555-55-55","+7(966)666-66-66","+7(977)777-77-77","+7(988)888-88-88","+7(999)999-99-99"];for(i=0;i<l.length;i++)e==l[i]&&(o=!0);return 11==a&&0==o}}(o.value)&&1==function(e){var t=!1;""!=e&&e.length<25&&(t=!0);return t}(c.value)&&(e=d,l=i.resolve(a,"./listener.php"),console.log(l),fetch(l,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:e}).then((function(e){!function(){if(t.querySelector(".thnk-block"))n();else{var e=document.createElement("div");e.classList.add("thnk-block"),t.append(e),e.innerHTML="\n                <h1>Спасибо!</h1>\n                <p>Мы свяжемся с Вами в ближайшее время</p>            \n            ",n()}function n(){var e,n=t.querySelector(".thnk-block");n.classList.add("vkl"),e=function(){n.classList.remove("transparent"),n.classList.add("movie")},window.requestAnimationFrame((function(){window.requestAnimationFrame((function(){e()}))})),setTimeout((function(){n.addEventListener("transitionend",(function e(){n.classList.remove("vkl"),n.removeEventListener("transitionend",e)})),n.classList.remove("movie"),n.classList.add("transparent")}),3e3)}}(),console.log("Сообщение отправлено методом fetch"),console.log(e)})).then((function(){c.value="",o.value=""})).catch((function(e){console.error(e)})))}return Inputmask.extendDefinitions({f:{validator:"[9().+/ ]"}}),d.length&&d.inputmask({mask:"+7(f99)999-99-99"}),{listenToClick:function(){l.addEventListener("click",s)}}}}.call(this,n(23),"/")},135:function(e,t,n){"use strict";n.r(t),function(e){n.d(t,"complexModal",(function(){return i})),n.d(t,"hodStrModal",(function(){return c}));var a=n(133),i=function(t,i){var c=t,o=i;function l(e){var t=document.getElementById("complex-modal").querySelector(".complex-modal__content");t.innerHTML="";var n=+e.getAttribute("id"),a=o.find((function(e){if(e.id==n)return e})),i=document.createElement("div");i.classList.add("top-image"),t.append(i),i.innerHTML='<img src="'.concat(a.preview,'">');var c=document.createElement("div");c.classList.add("bottom-text"),t.append(c),c.innerHTML='\n        <div class="label"></div>\n        <h2>'.concat(a.title,"</h2>\n        ").concat(a.content,"\n        ")}function d(){if(document.getElementById("complex-modal")){var e=document.getElementById("complex-modal").querySelector("form");console.log(e),Object(a.formFromAkcii)(e).listenToClick()}else console.log("i dont see form")}return{open:function(){if(document.querySelector(".modal.complex-modal"))e(".overlay .complex-modal").css("display","block"),e(".overlay").fadeIn(),l(c),d();else{var t=document.querySelector(".overlay");n.e(1).then(n.bind(null,134)).then((function(e){return t.insertAdjacentHTML("afterbegin",e.tpl.content()),e})).then((function(e){e.tpl.func()})).then((function(){l(c)})).then((function(){d()}))}},close:function(){e(".overlay").fadeOut(),e(".overlay .modal").fadeOut()}}},c=function(t){var a=t;document.querySelector(".modal.complex-modal");function i(e){var t=document.querySelector(".modal.complex-modal .top-image");t.innerHTML="";var n=document.createElement("div");n.classList.add("gallery-wr","gallery-imgs-row"),t.append(n);var a,i="";for(var c in e.gallery)i+=(a=e.gallery[c],'\n            <a href="'.concat(a,'" data-fancybox="gallery">\n                <img src="').concat(a,'" >\n            </a>                    \n            '));document.querySelector(".complex-modal .top-image").style.height="auto",n.innerHTML=i;var o=document.querySelector(".modal.complex-modal .bottom-text");o.innerHTML=e.content,o.insertAdjacentHTML("afterbegin","<h3>".concat(e.pagetitle,"</h3")),o.insertAdjacentHTML("afterbegin",'<div class="label">'.concat(e.date,"</div>"))}return{open:function(){if(document.querySelector(".modal.complex-modal"))e(".overlay .complex-modal").css("display","block"),e(".overlay").fadeIn(),i(a);else{var t=document.querySelector(".overlay");n.e(1).then(n.bind(null,134)).then((function(e){return t.insertAdjacentHTML("afterbegin",e.tpl.content()),e})).then((function(e){e.tpl.func()})).then((function(){i(a)}))}},close:function(){e(".overlay").fadeOut(),e(".overlay .modal").fadeOut()}}}}.call(this,n(23))},286:function(e,t,n){"use strict";n.r(t),function(e,a){n.d(t,"tpl",(function(){return d}));var i=n(135);function c(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i,c=!0,l=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return c=e.done,e},e:function(e){l=!0,i=e},f:function(){try{c||null==a.return||a.return()}finally{if(l)throw i}}}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var l=n(132),d={content:function(){return'\n    <div id="complex"></div>\n    <section class="complex-adv inner-block">\n        <div class="container">\n            <div class="complex-tabs">\n                <div data-title="about" class="complex-tab-btn active">О комплексе<div class="underline"></div></div>\n                <div data-title="akcii" class="complex-tab-btn">Акции<div class="underline"></div></div>\n                <div data-title="events" class="complex-tab-btn">События<div class="underline"></div></div>\n            </div>\n            <div class="complex-content">\n                <div class="cc_item active" id="cc_about">\n                    <div class="complex-adv-top">\n                        <div id="om[[+id]]" class="complex-item complex-item-l cm-open  af_start-btn" data-action="getResources" data-tpl="gr_complex-modal" data-resources="[[+id]]">\n                            <div class="image"><img src=""></div>\n                            <div class="bottom">\n                                <div class="label"></div>\n                                <h2>[[+pagetitle]]</h2>\n                                <p>[[+description]]</p>\n                            </div>\n                        </div>\n                        <div>\n                            <div id="om[[+id]]" class="complex-item cm-open af_start-btn" data-action="getResources" data-tpl="gr_complex-modal" data-resources="[[+id]]">\n                                <div class="image"><img src=""></div>\n                                <div class="bottom">\n                                    <div class="label"></div>\n                                    <h3>[[+pagetitle]]</h3>\n                                </div>\n                            </div>\n                            <div id="om[[+id]]" class="complex-item cm-open af_start-btn" data-action="getResources" data-tpl="gr_complex-modal" data-resources="[[+id]]">\n                                <div class="image"><img src=""></div>\n                                <div class="bottom">\n                                    <div class="label"></div>\n                                    <h3>[[+pagetitle]]</h3>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                    <div class="complex-adv-bottom">\n                        <div id="om[[+id]]" class="complex-item cm-open af_start-btn" data-action="getResources" data-tpl="gr_complex-modal" data-resources="[[+id]]">\n                            <div class="image"><img src=""></div>\n                            <div class="bottom">\n                                <div class="label"></div>\n                                <h3>[[+pagetitle]]</h3>\n                            </div>\n                        </div>\n                        <div id="om[[+id]]" class="complex-item complex-item-m cm-open af_start-btn" data-action="getResources" data-tpl="gr_complex-modal" data-resources="[[+id]]">\n                            <div class="image"><img src=""></div>\n                            <div class="bottom">\n                                <div class="label"></div>\n                                <h3>[[+pagetitle]]</h3>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                <div class="cc_item" id="cc_akcii">\n                    <div class="complex-adv-top">\n                        <div id="om[[+id]]" class="complex-item complex-item-l cm-open  af_start-btn" data-action="getResources" data-tpl="gr_complex-modal" data-resources="[[+id]]">\n                            <div class="image"><img src=""></div>\n                            <div class="bottom">\n                                <div class="label"></div>\n                                <h2>[[+pagetitle]]</h2>\n                                <p>[[+description]]</p>\n                            </div>\n                        </div>\n                        <div>\n                            <div id="om[[+id]]" class="complex-item cm-open af_start-btn" data-action="getResources" data-tpl="gr_complex-modal" data-resources="[[+id]]">\n                                <div class="image"><img src=""></div>\n                                <div class="bottom">\n                                    <div class="label"></div>\n                                    <h3>[[+pagetitle]]</h3>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                    <div class="complex-adv-bottom">\n                        <div id="om[[+id]]" class="complex-item cm-open af_start-btn" data-action="getResources" data-tpl="gr_complex-modal" data-resources="[[+id]]">\n                            <div class="image"><img src=""></div>\n                            <div class="bottom">\n                                <div class="label"></div>\n                                <h3>[[+pagetitle]]</h3>\n                            </div>\n                        </div>\n                        <div id="om[[+id]]" class="complex-item complex-item-m cm-open af_start-btn" data-action="getResources" data-tpl="gr_complex-modal" data-resources="[[+id]]">\n                            <div class="image"><img src=""></div>\n                            <div class="bottom">\n                                <div class="label"></div>\n                                <h3>[[+pagetitle]]</h3>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                <div class="cc_item" id="cc_news">\n                    <div class="complex-adv-top">\n                        <div id="om[[+id]]" class="complex-item complex-item-l cm-open  af_start-btn" data-action="getResources" data-tpl="gr_complex-modal" data-resources="[[+id]]">\n                            <div class="image"><img src=""></div>\n                            <div class="bottom">\n                                <div class="label"></div>\n                                <h2>[[+pagetitle]]</h2>\n                                <p>[[+description]]</p>\n                            </div>\n                        </div>\n                        <div>\n                            <div id="om[[+id]]" class="complex-item cm-open af_start-btn" data-action="getResources" data-tpl="gr_complex-modal" data-resources="[[+id]]">\n                                <div class="image"><img src=""></div>\n                                <div class="bottom">\n                                    <div class="label"></div>\n                                    <h3>[[+pagetitle]]</h3>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                    <div class="complex-adv-bottom">\n                        <div id="om[[+id]]" class="complex-item cm-open af_start-btn" data-action="getResources" data-tpl="gr_complex-modal" data-resources="[[+id]]">\n                            <div class="image"><img src=""></div>\n                            <div class="bottom">\n                                <div class="label"></div>\n                                <h3>[[+pagetitle]]</h3>\n                            </div>\n                        </div>\n                        <div id="om[[+id]]" class="complex-item complex-item-m cm-open af_start-btn" data-action="getResources" data-tpl="gr_complex-modal" data-resources="[[+id]]">\n                            <div class="image"><img src=""></div>\n                            <div class="bottom">\n                                <div class="label"></div>\n                                <h3>[[+pagetitle]]</h3>\n                            </div>\n                        </div>\n                    </div>\n                    <div class="complex-adv-extra">\n                        <div id="om[[+id]]" class="complex-item cm-open af_start-btn" data-action="getResources" data-tpl="gr_complex-modal" data-resources="[[+id]]">\n                            <div class="image"><img data-img-src="" src=""></div>\n                            <div class="bottom">\n                                <div class="label"></div>\n                                <h3>[[+pagetitle]]</h3>\n                            </div>\n                        </div>\n                    </div>\n                    <div class="button all-news-btn">все события</div>\n                </div>\n            </div>\n        </div>\n    </section>\n    '},func:function(){console.log("контент модуля активирован!"),document.querySelector(".complex-adv").classList.add("visible"),s(),e(".complex-adv .complex-tab-btn").click((function(){var t=e(this).index();e(this).hasClass("active")||(e(".complex-adv .complex-tab-btn").removeClass("active"),e(".complex-adv .complex-tab-btn").eq(t).addClass("active"),e(".complex-adv .cc_item").removeClass("active"),e(".complex-adv .cc_item").eq(t).addClass("active")),s()})),e(".complex-adv .all-news-btn").click((function(){e(".complex-adv .complex-adv-extra").css("display","flex"),e(".complex-adv .all-news-btn").css("display","none")})),e(".view .view-button").click((function(){e(".view .mask").fadeOut()}));var t=[],n=[],o=[],d=[];function s(){var e,s=document.getElementById("cc_about"),r=document.getElementById("cc_akcii"),m=document.getElementById("cc_news"),v=s,u=document.querySelector(".complex-tab-btn.active");e=u.dataset.title;var p=l.resolve(a,"./data_about-complex.json");switch(e){case"akcii":p=l.resolve(a,"./data_akcii.json"),v=r,d=n;break;case"events":p=l.resolve(a,"./data_events.json"),v=m,d=o;break;default:p=l.resolve(a,"./data_about-complex.json"),v=s,d=t}fetch(p).then((function(e){return e.json()})).then((function(a){console.log(a);var l=5;switch(e){case"akcii":d=n=a,l=5;break;case"events":d=o=a,l=10;break;default:d=t=a,l=5}!function(e,t,n){var a,o=!0,l=[],s=c(e);try{for(s.s();!(a=s.n()).done;){var r=a.value;l.push(r)}}catch(e){s.e(e)}finally{s.f()}var m=n||5;l.length<m&&(m=l.length,o=!1);function v(e){return'\n            <div class="complex-adv-top">\n                <div id="'.concat(e.id,'" class="complex-item complex-item-l cm-open  af_start-btn" data-action="getResources" data-tpl="gr_complex-modal" data-resources="[[+id]]">\n                    <div class="image"><img src="').concat(e.preview,'"></div>\n                    <div class="bottom">\n                        <div class="label"></div>\n                        <h2>').concat(e.title,"</h2>\n                        <p>").concat(e.description,"</p>\n                    </div>\n                </div>        \n            ")}function u(e){return'\n            <div class="complex-adv-top">\n                <div id="'.concat(e.id,'" class="complex-item complex-item-l cm-open  af_start-btn" data-action="getResources" data-tpl="gr_complex-modal" data-resources="[[+id]]">\n                    <div class="image"><img src="').concat(e.preview,'"></div>\n                    <div class="bottom">\n                        <div class="label"></div>\n                        <h2>').concat(e.title,"</h2>\n                        <p>").concat(e.description,"</p>\n                    </div>\n                </div> \n            </div>\n            ")}function p(e){return'\n            <div>\n                <div id="'.concat(e.id,'" class="complex-item cm-open af_start-btn" data-action="getResources" data-tpl="gr_complex-modal" data-resources="[[+id]]">\n                    <div class="image"><img src="').concat(e.preview,'"></div>\n                    <div class="bottom">\n                        <div class="label"></div>\n                        <h3>').concat(e.title,"</h3>\n                    </div>\n                </div>        \n            ")}function f(e){return'\n                <div>\n                    <div id="'.concat(e.id,'" class="complex-item cm-open af_start-btn" data-action="getResources" data-tpl="gr_complex-modal" data-resources="[[+id]]">\n                        <div class="image"><img src="').concat(e.preview,'"></div>\n                        <div class="bottom">\n                            <div class="label"></div>\n                            <h3>').concat(e.title,"</h3>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            ")}function g(e){return'\n                        <div id="'.concat(e.id,'" class="complex-item cm-open af_start-btn" data-action="getResources" data-tpl="gr_complex-modal" data-resources="[[+id]]">\n                        <div class="image"><img src="').concat(e.preview,'"></div>\n                        <div class="bottom">\n                            <div class="label"></div>\n                            <h3>').concat(e.title,"</h3>\n                        </div>\n                    </div>\n                </div>\n            </div>        \n            ")}function b(e){return'\n            <div class="complex-adv-bottom">\n                <div id="'.concat(e.id,'" class="complex-item cm-open af_start-btn" data-action="getResources" data-tpl="gr_complex-modal" data-resources="[[+id]]">\n                    <div class="image"><img src="').concat(e.preview,'"></div>\n                    <div class="bottom">\n                        <div class="label"></div>\n                        <h3>').concat(e.title,"</h3>\n                    </div>\n                </div>        \n            ")}function h(e){return'\n            <div class="complex-adv-bottom">\n                <div id="'.concat(e.id,'" class="complex-item cm-open af_start-btn" data-action="getResources" data-tpl="gr_complex-modal" data-resources="[[+id]]">\n                    <div class="image"><img src="').concat(e.preview,'"></div>\n                    <div class="bottom">\n                        <div class="label"></div>\n                        <h3>').concat(e.title,"</h3>\n                    </div>\n                </div>\n            </div>\n            ")}function x(e){return'\n                <div id="'.concat(e.id,'" class="complex-item complex-item-m cm-open af_start-btn" data-action="getResources" data-tpl="gr_complex-modal" data-resources="[[+id]]">\n                    <div class="image"><img src="').concat(e.preview,'"></div>\n                    <div class="bottom">\n                        <div class="label"></div>\n                        <h3>').concat(e.title,"</h3>\n                    </div>\n                </div>\n            </div>\n            ")}l.sort((function(e,t){if(e["time-stamp"]>t["time-stamp"])return 1;if(e["time-stamp"]==t["time-stamp"])return 0;if(e["time-stamp"]<t["time-stamp"])return-1}));for(var y="",_=0;_<m;_++)_+1==1||(_+1)%5==1?y+=_==m-1?u(l[_]):v(l[_]):_+1==2||(_+1)%5==2?y+=_==m-1?f(l[_]):p(l[_]):_+1==3||(_+1)%5==3?y+=g(l[_]):_+1==4||(_+1)%5==4?y+=_==m-1?h(l[_]):b(l[_]):_+1==5||(_+1)%5==0?y+=x(l[_]):console.log("I dont know, what to do with it: ",_);1==o&&(y+='\n            <div class="button all-news-btn">загрузить еще</div>\n            ');t.innerHTML=y;var w=document.querySelector(".cc_item.active"),k=w.querySelectorAll(".complex-item");if(1==o){t.querySelector(".button.all-news-btn").addEventListener("click",(function e(){t.querySelector(".button.all-news-btn").style.display="none";for(var n="",a=[],i=m;i<l.length;i++)a.push(l[i]),i+1==1||(i+1)%5==1?i==l.length-1?n+=u(l[i]):n+=v(l[i]):i+1==2||(i+1)%5==2?i==l.length-1?n+=f(l[i]):n+=p(l[i]):i+1==3||(i+1)%5==3?n+=g(l[i]):i+1==4||(i+1)%5==4?i==l.length-1?n+=h(l[i]):n+=b(l[i]):i+1==5||(i+1)%5==0?n+=x(l[i]):console.log("I dont know, what to do with it: ",i);t.insertAdjacentHTML("beforeend",n),t.querySelector(".button.all-news-btn").removeEventListener("click",e),k=w.querySelectorAll(".complex-item")}))}document.querySelector(".complex-content").addEventListener("click",(function(){console.log("тоткрыть модалку!");var e,t="",n=c(k);try{for(n.s();!(e=n.n()).done;){var a=e.value;if(a.contains(event.target))t=a,Object(i.complexModal)(t,d).open()}}catch(e){n.e(e)}finally{n.f()}}))}(d,v,l)}))}}}}.call(this,n(23),"/")}}]);